#pragma once

#include "../../base/base.h"
#include "../../converter/converter.h"
#include "../../io/file.h"
#include "../../io/printer.h"
#include "../../zlib-1.1.4/zlib.h"

struct a_config {
  uint32_t code;
  uint32_t stub_5;
  uLongf decompressed_len;
  uLongf compressed_len;
  uint32_t stub_10;
  storage_p hash;
  uint32_t stub_34;
  uint32_t signature_len;
  uint32_t stub_3C;
  uint32_t stub_40;
  uint32_t stub_44;
  uint32_t stub_48;
  uint32_t stub_4C;
  storage_p compressed;
  storage_p decompressed;
  storage_p signature;
};

void parse_plugin_block(a_config& ac);
void parse_plugin_file(const std::string& fn);
void print_plugin_config(const a_config& ac);